(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{162:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),s=a.n(c),i=(a(162),a(53)),o=a(13),l=a(19),u=a.n(l),d=a(44),j=a(29),b=a(61);a(169),a(207),a(205),a(206);b.a.initializeApp({apiKey:"AIzaSyDgZ8UZ0mySA3qTtlj3tJ1OZleyDAsuw84",authDomain:"bloodbankasaservice.firebaseapp.com",projectId:"bloodbankasaservice",storageBucket:"bloodbankasaservice.appspot.com",messagingSenderId:"621697739059",appId:"1:621697739059:web:8a6c3fe1d11046c74f7646"});var m=b.a.auth(),h=b.a.firestore(),p=b.a.storage(),O=(h.collection("/Requests"),new b.a.auth.GoogleAuthProvider,function(){var e=Object(j.a)(u.a.mark((function e(t,a){var n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=h.doc("User/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.email,c=t.displayName,s=t.photoURL,e.prev=8,e.next=11,n.set(Object(d.a)({displayName:c,email:r,photoURL:s},a));case 11:return e.abrupt("return",f(t.uid));case 14:e.prev=14,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 17:return e.abrupt("return",f(t.uid));case 18:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t,a){return e.apply(this,arguments)}}()),f=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,h.doc("User/".concat(t)).get();case 5:return a=e.sent,e.abrupt("return",Object(d.a)({uid:t},a.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:h.collection("/Requests").add(t).then((function(e){a(e.id)})).catch((function(e){console.error("Error adding document: ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),g=a(87),v=a(88),y=a(137),w=a(135),N=a(3),S=Object(n.createContext)({user:null}),C=function(e){Object(y.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.componentDidMount=Object(j.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.onAuthStateChanged(function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(a);case 2:n=t.sent,e.setState({user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state.user;return Object(N.jsx)(S.Provider,{value:e,children:this.props.children})}}]),a}(n.Component),k=a(234),A=a(236),q=a(119),E=a(57),B=a(37),T=[{name:"Location 1",location:{lat:33.409663,lng:-111.897216}},{name:"Location 2",location:{lat:34.409663,lng:-112.897216}},{name:"Location 3",location:{lat:33.439663,lng:-111.998}}],P={width:"100%",height:"100%"},_={lat:33.4092,lng:-111.9203},W=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(B.d)({id:"google-map-script",googleMapsApiKey:"AIzaSyCSngnFVuMXGnhdO2ZBsN7kYk_o7L9PVys"}).isLoaded?Object(N.jsxs)(B.a,{mapContainerStyle:P,zoom:13,center:_,children:[T.map((function(e){return Object(N.jsx)(B.c,{position:e.location,onClick:function(){return function(e){r(e)}(e)}},e.name)})),a.location&&Object(N.jsx)(B.b,{position:a.location,clickable:!0,onCloseClick:function(){return r({})},children:Object(N.jsx)("p",{children:a.name})})]}):Object(N.jsx)(N.Fragment,{})},R=function(){function e(e){var t=function(e){console.log(e)};x(e,(function(e){!function(e,t){if(!e)return null;try{console.log(e),h.doc("NearestServices/".concat(e)).onSnapshot((function(e){e.data()&&t(e.data())}))}catch(a){console.error("Error fetching user",a)}}(e,t)}))}var t={paper:{padding:10,marginTop:20,marginBottom:20,height:"350%"}},a=Object(n.useContext)(S),r=a.displayName,c=a.email,s=a.bloodGroup;return console.log(a),Object(N.jsxs)(k.a,{container:!0,children:[Object(N.jsx)(k.a,{item:!0,sm:4,children:Object(N.jsx)(A.a,{style:t.paper,children:Object(N.jsxs)("div",{className:"mx-auto w-11/12 md:w-2/4 py-8 px-4 md:px-8",children:[Object(N.jsx)("div",{className:"flex border flex-col items-center md:flex-row md:items-start border-blue-400 px-3 py-4",children:Object(N.jsxs)("div",{className:"md:pl-4",children:[Object(N.jsx)("h2",{className:"text-2xl font-semibold",children:r}),Object(N.jsx)("h3",{className:"italic",children:c}),Object(N.jsx)("h3",{className:"italic",children:s})]})}),Object(N.jsxs)("div",{children:[Object(N.jsx)(q.a,{variant:"contained",color:"secondary",style:{margin:10},onClick:function(){var t={};E.a.getCurrentPosition((function(a){(t={latitude:a.coords.latitude,longitude:a.coords.longitude,timestamp:a.timestamp}).email=c,e(t)}),(function(e){console.log(e.code,e.message)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e5})},children:"Request Blood"}),Object(N.jsx)(q.a,{variant:"contained",color:"primary",onClick:function(){m.signOut()},children:"Sign Out"})]})]})})}),Object(N.jsx)(k.a,{item:!0,sm:!0,children:Object(N.jsx)(A.a,{style:t.paper,children:Object(N.jsx)(W,{})})})]})},I=a(239),L=a(126),U=a(242),D=a(247),z=a(243),F=a(139),G=a(237),H=a(238),Z=function(){var e=Object(G.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=(a[1],Object(n.useState)("")),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(n.useState)(""),d=Object(o.a)(u,2),j=d[0],b=d[1],h=Object(n.useState)(null),p=Object(o.a)(h,2),O=(p[0],p[1]),f=Object(n.useState)(null),x=Object(o.a)(f,2),g=(x[0],x[1]),v=Object(n.useState)(""),y=Object(o.a)(v,2),w=y[0],S=y[1],C=function(e){var t=e.currentTarget,a=t.name,n=t.value;if("userEmail"===a){g({userEmail:""}),l(n);var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;console.log(r.test(n)),r.test(n)||g({userEmail:"Email is not valid"})}else"userPassword"===a&&(g({userPassword:""}),b(n),n.length<1&&g({userPassword:"password should not be null"}))};return r?Object(N.jsx)(R,{}):Object(N.jsxs)(H.a,{component:"main",maxWidth:"xs",children:[Object(N.jsx)(I.a,{}),Object(N.jsxs)("div",{className:e.paper,children:[Object(N.jsx)(F.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(N.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(N.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"userEmail",value:i,autoFocus:!0,onChange:function(e){return C(e)}}),Object(N.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"current-password",name:"userPassword",value:j,onChange:function(e){return C(e)}}),Object(N.jsx)(U.a,{control:Object(N.jsx)(D.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(N.jsx)(q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){!function(e,t,a){e.preventDefault(),m.signInWithEmailAndPassword(t,a).catch((function(e){O("Error signing in with password and email!"),console.error("Error signing in with password and email",e)}))}(e,i,j)},children:"Sign In"}),Object(N.jsx)(q.a,{fullWidth:!0,variant:"contained",className:e.submit,onClick:function(e){E.a.getCurrentPosition((function(e){var t={anonymous:!0,face_signature:null,victim_id:null,timestamp:(new Date).getTime(),latitude:e.coords.latitude,longitude:e.coords.longitude};fetch("https://us-central1-bloodbankasaservice.cloudfunctions.net/get_user_by_request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){S(e)})).catch((function(e){console.log(e)}))}),(function(e){console.log(e.code,e.message)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e5})},children:"Urgent Blood Request"}),Object(N.jsx)(L.a,{fullWidth:!0,value:w}),Object(N.jsxs)(k.a,{container:!0,children:[Object(N.jsx)(k.a,{item:!0,xs:!0,children:Object(N.jsx)(z.a,{href:"passwordReset",variant:"body2",children:"Forgot password?"})}),Object(N.jsx)(k.a,{item:!0,children:Object(N.jsx)(z.a,{href:"signUp",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})},J=a(31),M=a(136),V=a(101),K=a.n(V),$=a(250),Q=a(245),X=a(100),Y=a(7),ee=a(133),te=a.n(ee),ae=a(241),ne=a(249),re=a(248),ce=a(127),se=function(){var e,t=Object(G.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),a=Object(Y.a)({root:{color:X.a[400],"&$checked":{color:X.a[600]}},checked:{}})((function(e){return Object(N.jsx)(D.a,Object(d.a)({color:"default"},e))})),r=Object(n.useState)(""),c=Object(o.a)(r,2),s=c[0],i=c[1],l=Object(n.useState)(""),b=Object(o.a)(l,2),h=b[0],f=b[1],x=Object(n.useState)(""),g=Object(o.a)(x,2),v=g[0],y=g[1],w=Object(n.useState)(""),S=Object(o.a)(w,2),C=S[0],A=S[1],E=Object(n.useState)(""),B=Object(o.a)(E,2),T=B[0],P=B[1],_=Object(n.useState)(null),W=Object(o.a)(_,2),R=(W[0],W[1]),Z=Object(n.useState)(""),ee=Object(o.a)(Z,2),se=ee[0],ie=ee[1],oe=Object(n.useState)(""),le=Object(o.a)(oe,2),ue=le[0],de=le[1],je=Object(n.useState)(""),be=Object(o.a)(je,2),me=be[0],he=be[1],pe=Object(n.useState)({lat:null,lng:null}),Oe=Object(o.a)(pe,2),fe=Oe[0],xe=Oe[1],ge=Object(n.useState)(!0),ve=Object(o.a)(ge,2),ye=ve[0],we=ve[1],Ne=Object(n.useState)(!1),Se=Object(o.a)(Ne,2),Ce=Se[0],ke=Se[1],Ae=Object(n.useState)(!1),qe=Object(o.a)(Ae,2),Ee=qe[0],Be=qe[1],Te=Object(n.useState)(null),Pe=Object(o.a)(Te,2),_e=Pe[0],We=Pe[1],Re=Object(n.useState)(""),Ie=Object(o.a)(Re,2),Le=(Ie[0],Ie[1]),Ue=Object(n.useState)(0),De=Object(o.a)(Ue,2),ze=De[0],Fe=De[1],Ge=Object(n.useState)(""),He=Object(o.a)(Ge,2),Ze=He[0],Je=He[1],Me=Object(n.useState)([{itemName:"A+",quantity:0},{itemName:"A-",quantity:0},{itemName:"B+",quantity:0},{itemName:"B-",quantity:0},{itemName:"O+",quantity:0},{itemName:"O-",quantity:0},{itemName:"AB+",quantity:0},{itemName:"AB-",quantity:0}]),Ve=Object(o.a)(Me,2),Ke=Ve[0],$e=Ve[1],Qe=function(){var e=Object(j.a)(u.a.mark((function e(t,a,n){var r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,m.createUserWithEmailAndPassword(a,n);case 4:r=e.sent,c=r.user,s=ye?"USER":Ee?"BLOOD BANK":"HOSPITAL",O(c,ye?{firstName:C,lastName:T,displayName:v,contact:se,address:ue,coordinates:fe,bloodGroup:me,userType:s}:{displayName:v,contact:se,address:ue,coordinates:fe,bloodGroupQuan:Ke,userType:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),R("Error Signing up with email and password");case 13:i(""),f(""),y(""),ie(""),de(""),he(""),xe({lat:null,lng:null});case 20:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Xe=function(e){var t=e.currentTarget,a=t.name,n=t.value;if("userEmail"===a){Je({userEmail:""}),i(n);var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;console.log(r.test(n)),r.test(n)||Je({userEmail:"Email is not valid"})}else"userPassword"===a?(Je({userPassword:""}),f(n),n.length<1&&Je({userPassword:"password should not be null"})):"displayName"===a?(Je({displayName:""}),y(n),n.length<5&&Je({displayName:"DisplayName should be atleast 5 chars"})):"userContact"===a?(Je({userContact:""}),ie(n),10!==n.length&&Je({userContact:"Phone number should be 10 digits"})):"isUser"===a?(we(!ye),ke(!1),Be(!1)):"isHospital"===a?(ke(!Ce),Be(!1),we(!1)):"isBloodBank"===a?(Be(!Ee),ke(!1),we(!1)):"firstName"===a?(Je({firstName:""}),A(n),n.length<5&&Je({firstName:"length should be atleast 5"})):"lastName"===a&&(Je({lastName:""}),P(n),n.length<5&&Je({lastName:"length should be atleast 5"}))},Ye=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.geocodeByAddress)(t);case 2:return a=e.sent,e.next=5,Object(V.getLatLng)(a[0]);case 5:n=e.sent,de(t),xe(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(H.a,{component:"main",maxWidth:"xs",children:[Object(N.jsx)(I.a,{}),Object(N.jsxs)("div",{className:t.paper,children:[Object(N.jsx)(F.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(N.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(N.jsxs)(k.a,{container:!0,spacing:3,children:[Object(N.jsxs)(Q.a,{row:!0,style:{paddingLeft:60},children:[Object(N.jsx)(U.a,{control:Object(N.jsx)(D.a,{checked:Ee,onChange:function(e){return Xe(e)},name:"isBloodBank"}),label:"Blood Bank"}),Object(N.jsx)(U.a,{control:Object(N.jsx)(D.a,{checked:Ce,onChange:function(e){return Xe(e)},name:"isHospital",color:"primary"}),label:"Hospital"}),Object(N.jsx)(U.a,{control:Object(N.jsx)(a,{checked:ye,onChange:function(e){return Xe(e)},name:"isUser"}),label:"User"})]}),ye&&Object(N.jsxs)(k.a,{container:!0,spacing:3,children:[Object(N.jsx)(k.a,{item:!0,xs:12,sm:6,children:Object(N.jsx)(L.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:C,error:Ze.firstName,helperText:Ze.firstName,onChange:function(e){return Xe(e)}})}),Object(N.jsx)(k.a,{item:!0,xs:12,sm:6,children:Object(N.jsx)(L.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:T,error:Ze.lastName,helperText:Ze.lastName,onChange:function(e){return Xe(e)}})})," "]}),(Ee||Ce||ye)&&Object(N.jsx)(k.a,{item:!0,xs:12,children:Object(N.jsx)(L.a,(e={fullWidth:!0,required:!0,id:"outlined"},Object(J.a)(e,"required",!0),Object(J.a)(e,"label","Name"),Object(J.a)(e,"variant","outlined"),Object(J.a)(e,"name","displayName"),Object(J.a)(e,"value",v),Object(J.a)(e,"error",Ze.displayName),Object(J.a)(e,"helperText",Ze.displayName),Object(J.a)(e,"onChange",(function(e){return Xe(e)})),e))}),Object(N.jsx)(k.a,{item:!0,xs:12,children:Object(N.jsx)(L.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"userEmail",autoComplete:"email",value:s,error:Ze.userEmail,helperText:Ze.userEmail,onChange:function(e){return Xe(e)}})}),Object(N.jsx)(k.a,{item:!0,xs:12,children:Object(N.jsx)(L.a,{variant:"outlined",required:!0,fullWidth:!0,name:"userPassword",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:h,error:Ze.userPassword,helperText:Ze.userPassword,onChange:function(e){return Xe(e)}})}),Object(N.jsx)(k.a,{item:!0,xs:12,children:Object(N.jsx)(te.a,{variant:"outlined",fullWidth:!0,required:!0,label:"Contact Number",defaultCountry:"us",value:se,name:"userContact",error:Ze.userContact,helperText:Ze.userContact,onChange:ie})}),ye&&Object(N.jsx)(k.a,{item:!0,xs:12,children:Object(N.jsxs)(ae.a,{variant:"outlined",required:!0,fullWidth:!0,children:[Object(N.jsx)(re.a,{children:"Blood Group"}),Object(N.jsxs)(ne.a,{name:"userBloodGroup",value:me,onChange:function(e){he(e.target.value)},label:"Blood Group",children:[Object(N.jsx)(ce.a,{value:"",children:Object(N.jsx)("em",{children:"None"})}),Object(N.jsx)(ce.a,{value:"A+",children:"A+"}),Object(N.jsx)(ce.a,{value:"A-",children:"A-"}),Object(N.jsx)(ce.a,{value:"B+",children:"B+"}),Object(N.jsx)(ce.a,{value:"B-",children:"B-"}),Object(N.jsx)(ce.a,{value:"O+",children:"O+"}),Object(N.jsx)(ce.a,{value:"O-",children:"O-"}),Object(N.jsx)(ce.a,{value:"AB+",children:"AB+"}),Object(N.jsx)(ce.a,{value:"AB-",children:"AB-"})]})]})}),Object(N.jsx)(k.a,{item:!0,xs:12,children:Object(N.jsx)(K.a,{value:ue,onChange:de,onSelect:Ye,children:function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,r=e.loading;return Object(N.jsxs)("div",{children:[Object(N.jsx)(L.a,Object(d.a)({variant:"outlined",required:!0,fullWidth:!0,label:"Type address"},t({}))),Object(N.jsxs)("div",{children:[r?Object(N.jsx)("div",{children:"...loading"}):null,a.map((function(e){var t={backgroundColor:e.active?"#41b6e6":"#fff"};return Object(N.jsx)("div",Object(d.a)(Object(d.a)({},n(e,{style:t})),{},{children:e.description}))}))]})]})}})}),(Ee||Ce)&&Object(N.jsx)(k.a,{container:!0,spacing:1,children:Ke.map((function(e,t){return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{children:Object(N.jsx)("span",{children:e.itemName})}),Object(N.jsx)("div",{children:Object(N.jsx)(L.a,{type:"number",required:!0,fullWidth:!0,size:"small",style:{display:"flex",width:"95%"},inputProps:{min:0},variant:"outlined",name:"bloodGroupQuan",value:e.quantity,onChange:function(e){return function(e,t){var a=Object(M.a)(Ke);Ke[e].quantity=t.currentTarget.value,$e(a)}(t,e)}})})]})}))})]}),Object(N.jsxs)(k.a,{children:[Object(N.jsx)("progress",{value:ze,max:"100"}),Object(N.jsx)(L.a,{type:"file",onChange:function(e){e.target.files[0]&&We(e.target.files[0])}}),Object(N.jsx)(q.a,{onClick:function(){p.ref("images/".concat(_e.name)).put(_e).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Fe(t)}),(function(e){console.log(e)}),(function(){p.ref("images").child(_e.name).getDownloadURL().then((function(e){Le(e)}))}))},children:"Upload"})]}),Object(N.jsx)($.a,{m:2,pt:2,children:Object(N.jsx)(q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){Qe(e,s,h)},children:"Sign Up"})}),Object(N.jsx)(k.a,{container:!0,justify:"flex-end",children:Object(N.jsx)(k.a,{item:!0,children:Object(N.jsx)(z.a,{href:"/",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})},ie=a(246),oe=Object(G.a)({root:{marginBottom:"20px"}});var le=function(){var e=oe(),t=Object(n.useState)("Time to be a hero"),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1];return Object(N.jsxs)(k.a,{container:!0,justify:"center",alignItems:"center",direction:"column",style:{minHeight:"100vh"},children:[Object(N.jsx)(q.a,{variant:"contained",className:e.root,size:"large",color:"secondary",onClick:function(e){u(!0),E.a.getCurrentPosition((function(e){var t={anonymous:!0,face_signature:null,victim_id:null,timestamp:(new Date).getTime(),latitude:e.coords.latitude,longitude:e.coords.longitude};fetch("https://us-central1-bloodbankasaservice.cloudfunctions.net/get_user_by_request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){u(!1),c(e)})).catch((function(e){u(!1),console.log(e)}))}),(function(e){u(!1),c("Network Error. Try Again!"),console.log(e.code,e.message)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e5})},children:"Emergency!"}),l?Object(N.jsx)(ie.a,{size:30}):Object(N.jsx)(F.a,{gutterBottom:!0,children:r})]})},ue={paper:{height:"90vh"}},de={width:"100%",height:"100%"},je={lat:33.4092,lng:-111.9203},be=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1],d=e.user_id,j=e.request_id;Object(n.useEffect)((function(){var e={user_id:d,request_id:j};fetch("https://us-central1-bloodbankasaservice.cloudfunctions.net/get_blood_request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),c([{name:"Donor",location:{lat:parseFloat(e.donar.coordinates.latitude),lng:parseFloat(e.donar.coordinates.longitude)}},{name:"Receiver",location:{lat:parseFloat(e.receiver.coordinates.latitude),lng:parseFloat(e.receiver.coordinates.longitude)}}]),u(!0)})).catch((function(e){console.log(e)}))}),[d,j]);var b=function(e,t){fetch("https://us-central1-bloodbankasaservice.cloudfunctions.net/get_request_acceptance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accepted:t,user_id:d,request_id:j})}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){console.log(e)}))};Object(B.d)({id:"google-map-script",googleMapsApiKey:"AIzaSyCSngnFVuMXGnhdO2ZBsN7kYk_o7L9PVys"}).isLoaded;return l?Object(N.jsxs)("div",{children:[Object(N.jsxs)(k.a,{container:!0,justify:"center",alignItems:"center",style:{minHeight:"10vh"},children:[Object(N.jsx)(q.a,{variant:"contained",style:{marginRight:"5px"},size:"large",color:"primary",onClick:function(e){b(0,!0)},children:"Accept Request"}),Object(N.jsx)(q.a,{variant:"contained",style:{marginLeft:"5px"},size:"large",color:"secondary",onClick:function(e){b(0,!1)},children:"Reject Request"})]}),Object(N.jsx)(k.a,{container:!0,children:Object(N.jsx)(k.a,{item:!0,sm:!0,children:Object(N.jsx)(A.a,{style:ue.paper,children:Object(N.jsx)(B.a,{mapContainerStyle:de,zoom:8,center:je,children:r.map((function(e){return Object(N.jsx)(B.c,{position:e.location},e.name)}))})})})})]}):Object(N.jsx)(N.Fragment,{})},me=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),l=s[0],u=s[1],d=Object(n.useState)(null),j=Object(o.a)(d,2),b=j[0],h=j[1];return Object(N.jsxs)("div",{className:"mt-8",children:[Object(N.jsx)("h1",{className:"text-xl text-center font-bold mb-3",children:"Reset your Password"}),Object(N.jsxs)("div",{className:"border border-blue-300 mx-auto w-11/12 md:w-2/4 rounded py-8 px-4 md:px-8",children:[Object(N.jsxs)("form",{action:"",children:[l&&Object(N.jsx)("div",{className:"py-3 bg-green-400 w-full text-white text-center mb-3",children:"An email has been sent to you!"}),null!==b&&Object(N.jsx)("div",{className:"py-3 bg-red-600 w-full text-white text-center mb-3",children:b}),Object(N.jsx)("label",{htmlFor:"userEmail",className:"w-full block",children:"Email:"}),Object(N.jsx)("input",{type:"email",name:"userEmail",id:"userEmail",value:a,placeholder:"Input your email",onChange:function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a&&r(n)},className:"mb-3 w-full px-1 py-2"}),Object(N.jsx)("button",{className:"w-full bg-blue-400 text-white py-3",onClick:function(e){!function(e){e.preventDefault(),m.sendPasswordResetEmail(a).then((function(){u(!0),setTimeout((function(){u(!1)}),3e3)})).catch((function(){h("Error resetting password")}))}(e)},children:"Send me a reset link"})]}),Object(N.jsx)(i.a,{to:"/",className:"my-2 text-blue-700 hover:text-blue-800 text-center block",children:"\u2190 back to sign in page"})]})]})};var he=function(){return Object(n.useContext)(S),Object(N.jsxs)(i.b,{children:[Object(N.jsx)(se,{path:"signUp"}),Object(N.jsx)(Z,{path:"/"}),Object(N.jsx)(le,{path:"/emergency"}),Object(N.jsx)(be,{path:"/notified/:user_id/:request_id"}),Object(N.jsx)(me,{path:"passwordReset"})]})};var pe=function(){return Object(N.jsx)(C,{children:Object(N.jsx)(he,{})})};s.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(pe,{})}),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.ad8f477f.chunk.js.map